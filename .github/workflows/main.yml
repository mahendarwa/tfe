name: Scheduled Build and Tag Push Workflow

on:
  schedule:
    - cron: '30 5 * * 1-5'
    - cron: '30 10 * * 1-5'
    - cron: '0 15 * * 1-5'
    - cron: '0 19 * * 1-5'
  push:
    tags:
      - '*'

jobs:
  build-scheduled:
    runs-on: ubuntu-latest
    if: github.event_name == 'schedule'  # Ensures it only runs on schedule
    steps:
      - name: Checkout release/develop branch
        uses: actions/checkout@v2
        with:
          ref: release/develop

      - name: Print the fixed tag for release/develop branch
        run: |
          TAG=00-00-00
          echo "Scheduled build triggered for release/develop. Tag used: $TAG"

  build-on-tag-push:
    runs-on: ubuntu-latest
    if: github.event_name == 'push' && startsWith(github.ref, 'refs/tags/')
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Print the tag for tag push
        run: |
          TAG=${GITHUB_REF#refs/tags/}
          echo "Build triggered by tag push. Tag used: $TAG"
