name: Multi-job Workflow

on:
  push:
    branches:
      - 'release/develop'
      - 'feature/RBOC-115414_new'
    tags:
      - '*'  # Trigger on any tag commit

jobs:
  build-main:
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build project (main branch)
        run: echo "Building the project for the main branch..."

  build-develop-release:
    if: github.ref == 'refs/heads/develop' || startsWith(github.ref, 'refs/heads/release/')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build project (develop or release branch) with static tag 00-00-00
        run: |
          TAG=00-00-00
          echo "Building the project with tag: $TAG"

  build-feature-RBOC:
    if: github.ref == 'refs/heads/feature/RBOC-115414_new'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build project with Jenkins-created tag
        run: |
          TAG=RBOC115414_new
          echo "Building the project for feature branch with tag: $TAG"

  build-tag:
    if: startsWith(github.ref, 'refs/tags/')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build project for tag
        run: |
          TAG=${GITHUB_REF#refs/tags/}
          echo "Building the project for the tag: $TAG"
