- name: Authenticate with GitHub
  run: |
    git config --global user.email "github-actions@github.com"
    git config --global user.name "GitHub Actions"
    git config --global credential.helper store
    echo "https://${{ secrets.ICP_GH_TOKEN }}@github.com" > ~/.git-credentials
    chmod 600 ~/.git-credentials

- name: Verify Git Authentication
  run: git ls-remote https://github.com/dojo360/optum-ips.git

- name: Setup Terraform
  uses: hashicorp/setup-terraform@v2
  with:
    terraform_version: 1.5.6

- name: Terraform Init
  run: terraform init -backend=false -no-color
